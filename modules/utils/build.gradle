dependencies {
	compile group: "com.liferay.portal", name: "com.liferay.portal.kernel", version: "2.0.0"
	compile group: "org.osgi", name: "org.osgi.compendium", version: "5.0.0"
	compile group: "javax.portlet", name: "portlet-api", version: "2.0"
	compile group: "javax.servlet", name: "servlet-api", version: "2.5"
	compile group: "javax.mail", name: "mail", version: "1.4"
	
	compile group: "biz.aQute.bnd", name: "biz.aQute.bndlib", version: "3.1.0"
	compile group: "biz.aQute.bnd", name: "biz.aQute.bndlib", version: "3.1.0"
}

buildscript {
	repositories {
		jcenter()
	}
	dependencies {
		classpath 'org.hidetake:gradle-ssh-plugin:2.6.0'
	}
}

apply plugin: 'org.hidetake.ssh'


ssh.settings {
	knownHosts = allowAnyHosts
}


remotes {
	prod {
		host = 'ems-surfs-web.sdv.fr'
		user = 'tomcat'
		identity = file("D:/ssh/private.ppk")
	}
}

task hello << {
	ssh.run {
		session(remotes.prod) {
			def result = execute 'echo hello'
			
			println result
		}
	}
}

task deployProd << {
	ssh.run {
		session(remotes.prod) {
			put from: 'build/libs/eu.strasbourg.utils-1.0.0.jar', into: '/data/surfs/liferay/liferay-ce-portal-7.0-ga3/deploy/eu.strasbourg.utils-1.0.0.jar'
		}
	}
}
