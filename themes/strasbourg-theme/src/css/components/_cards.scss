// Container qui englobe chaque card
// ==========================================================================
.st-card-container {
	position: relative;
	display: flex;
	height: 100%;
}

// Card - Default Styles
// ==========================================================================
// Cards en format portrait par défaut : image en haut et contenu en-dessous
.st-card {
	--image-size: 100px;
	--aspect-ratio: 1/1;
	@include reset-button;
	position: relative;
	display: flex;
	flex-direction: column-reverse;
	justify-content: flex-end;
	width: 100%;

	@include can-hover {
		.st-title-card {
			color: $c_sub;
		}
		.st-image:after {
			opacity: 0.8
		}
	}

	.st-image {
		@include aspect-ratio(var(--aspect-ratio), '.st-figure');
		flex-shrink: 0;
		margin-bottom: 15px;
		background-color: $c_white;
		border-radius: $border-radius-small;
		@include addTransition();

		img {
			border-radius: $border-radius-small;
		}
	}

	.st-container {
		display: flex;
		flex-wrap: wrap;
		@include ft($f_txt, 12px, 300, $c_txt, 1.25);

		.st-classement {
			display: inline-block;
			vertical-align: top;
			margin-right: 5px;

			&:first-of-type {
				margin-left: 4px;
			}

			span {
				font-size: 12px;
				line-height: 1;

				@include mobile {
					font-size: 10px;
				}

				&.st-icon-cle, &.st-icon-epis {
					position: relative;
					top: 1px;
				}

				&.st-icon-stars {
					& + .st-icon-epis, & + .st-icon-cle {
						margin-left: 5px;
					}
				}

				&.st-icon-epis {
					@include mobile {
						top: 0;
						margin-left: -3px;
					}
				}
			}

			&.st-classement-epis {
				@include mobile {
					margin-left: 2px;
				}
			}
		}
	}

	.st-caption {
		display: flex;
		flex-direction: column;
		align-items: flex-start;

		& > * {
			&:last-child {
				margin-bottom: 0;
			}
		}

		.st-surtitre-cat {
			order: 1;
			margin-bottom: 4px;
		}

		.st-title-card {
			order: 2;
			@include ft('', 15px, 700, $c_white, 1);
			display: block;
			margin-bottom: 6px;
			@include addTransition();

			@include mobile {
				font-size: 14px;
			}
		}

		.st-text {
			order: 3;
			@include ft($f_txt, 12px, 400, $c_txt, 1.16);
		}

		.st-location {
			order: 4;
		}

		.st-date {
			order: 1;
			@include ft($f_txt, 12px, 600, $c_white, 1);
			@include letter-spacing(25);
			text-transform: uppercase;
			margin-bottom: 2px;

			@include mobile {
				font-size: 11px;
			}
		}
	}

	.st-meta-wrapper {
		&.st-meta-heure {
			background-color: $c_main;
			font-weight: 700;
		}

		& + .st-location {
			@include min-mobile {
				margin-top: 10px;
			}
		}
	}

	.st-badge-ouverture {
		position: absolute;
		bottom: 6px;
		left: -8px;
		z-index: 5;
		display: inline-block;
		padding: 6px 8px;
		@include ft('', 12px, 500, $c_main, 1);
		@include letter-spacing(150);
		text-transform: uppercase;
		background-color: $c_sub;
		border-radius: $border-radius-small;

		@include mobile {
			bottom: 4px;
			left: -4px;
			font-size: 10px;
			@include letter-spacing(100);
		}

		&.st--closed {
			background-color: $c_pink;
		}
	}

	& + .st-btn-favorite-card {
		--btn-favorite-size: 36px;
		--image-size: 100%;
		position: absolute;
		top: 0;
		left: calc(var(--image-size) - var(--btn-favorite-size));
		margin-top: calc(var(--image-size) - var(--btn-favorite-size));
		width: var(--btn-favorite-size);
		height: var(--btn-favorite-size);
	}

	// --modifiers
	// Format paysage : image en taille fixe à gauche et contenu à droite
	&.st--card-horizontal {
		@include card-horizontal();
	}

	// gradient sur l'image pour mettre en avant le bouton de favoris
	&.st--with-gradient {
		.st-image:after {
			content: '';
			position: absolute;
			bottom: 0;
			right: 0;
			width: var(--image-size);
			height: var(--image-size);
			background-image: radial-gradient(circle farthest-side at 100% 100%, #291E21 0%, transparent 100%);
			//background-image: radial-gradient(circle farthest-side at 100% 100%, red 0%, green 99%, transparent 100%);
			pointer-events: none;
			border-radius: $border-radius-small;
			@include addTransition();
		}
	}


	&.st-card-actu {
		.st-caption {
			.st-title-card {
				margin-top: 4px;
				@include min-tablet-portrait {
					font-size: 18px;
				}
			}

			.st-date {
				order: -1;
				@include ft($f_txt, 12px, 400, $c_txt, 1);

				@include mobile {
					font-size: 11px;
				}
			}
		}

		// Image au format paysage sur les 2 premières cards du bloc actu home
		&.st--is-featured {
			@include min-tablet-portrait {
				--aspect-ratio: 550/320;
				padding-bottom: 16px;
			}
		}
	}

	// Card sur le listing agenda au format horizontal
	&.st-card-agenda {
		 .st-caption {
			.st-surtitre-cat {
				order: 2;
			}

			.st-title-card {
				order: 3;
			}

			.st-location {
				order: 4;
			}
		}

		// Card sans image sur le bloc agenda sur la home
		&.st--text-only {
			background-color: $c_greydark;
			border-radius: $border-radius-small;
			padding: 16px 40px 16px 20px;

			@include can-hover {
				background-color: $c_main;

				.st-surtitre-cat {
					color: $c_grey;
				}
			}

			& + .st-btn-favorite-card {
				top: initial;
				left: initial;
				right: 5px;
				bottom: 5px;
			}
		}
	}



	// Card avec effet de box-shadow au hover
	&.st--with-shadow {
		// pas de shadow pour les cards dans un leaflet
		:not(.leaflet-popup-content) > & {
			@include card-shadow();
		}
	}
}
